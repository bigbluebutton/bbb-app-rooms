<%
# BigBlueButton open source conferencing system - http://www.bigbluebutton.org/.
# Copyright (c) 2018 BigBlueButton Inc. and by respective authors (see below).
# This program is free software; you can redistribute it and/or modify it under the
# terms of the GNU Lesser General Public License as published by the Free Software
# Foundation; either version 3.0 of the License, or (at your option) any later
# version.
#
# BigBlueButton is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
# You should have received a copy of the GNU Lesser General Public License along
# with BigBlueButton; if not, see <http://www.gnu.org/licenses/>.
%>

<%= form_with(model: room, local: true, class: "form fill", :url => room_path(@room, :launch_nonce => @launch_nonce) ) do |form| %>
  <% if room.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(room.errors.count, "error") %> prohibited this room from being saved:</h2>

      <ul>
      <% room.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field form-group block input-group w-full rounded pt-8">
    <p>
      <%= form.label t('default.room.name') , style: "display: inline" %> 
      <span class="text-muted small text-red-500" style="display: inline"> *Required  </span>
    </p>
    <%= form.text_field :name, :required => true,  class: "form-control rounded-none rounded input mt-1 block w-full" %>
  </div> 
  <div class="field form-group input-group">
    <%= form.check_box :hide_name, id: 'hide_name_checkbox' %>&nbsp;
    <%= t('default.room.hidename') %>&nbsp;
    <br>
  </div>

  <div class="field form-group input-group w-full pt-4">
    <%= form.label t('default.room.description') %>
    <%= form.text_area :description, size: "45x8", class: 'form-control w-full input form-input' %>
  </div>
  <div class="field form-group input-group">
    <%= form.check_box :hide_description, id: 'hide_description_checkbox' %>&nbsp;
    <%= t('default.room.hidedescription') %>&nbsp;
    <br>
  </div>

  <div class="field form-group input-group w-full pt-4">
    <%= form.label t('default.room.welcome') %>
    <%= form.text_area :welcome, size: "45x4", class: 'form-control w-full input form-input' %>
  </div>

  <%= form.hidden_field :moderator, value: @room.moderator %>
  <%= form.hidden_field :viewer, value: @room.viewer %>

  <% if bigbluebutton_recording_enabled %>
    <div class="field form-group input-group pt-4">
      <%= form.check_box :recording %>&nbsp;
      <b><%= t('default.room.recording') %></b>&nbsp;
      <i data-toggle="tooltip" title="<%= t('default.room.tooltip.recording') %>">
       <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
        <path fill-rule="evenodd" d="M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
        </svg>
      </i>
      <br>
    </div>
  <% end %>

  <div class="field form-group input-group">
    <%= form.check_box :wait_moderator, id: 'wait_mod_checkbox' %>&nbsp;
    <b><%= t('default.room.waitmoderator') %></b>&nbsp;
     <i data-toggle="tooltip" title="<%= t('default.room.tooltip.waitmoderator') %>">
       <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
        <path fill-rule="evenodd" d="M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
        </svg>
      </i>
    <br>
  </div>

  <div class="field form-group input-group">
    <%= form.check_box :all_moderators, id: 'all_mod_checkbox' %>&nbsp;
    <b><%= t('default.room.allmoderators') %></b>&nbsp;
     <i data-toggle="tooltip" title="<%= t('default.room.tooltip.allmoderators') %>">
       <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
        <path fill-rule="evenodd" d="M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
        </svg>
      </i>
    <br>
  </div>

  <details>
    <summary class="text-black ">Lock Settings</summary>
    
    <div class="field form-group input-group" style="padding-left: 5%">
      <%= form.check_box :disable_webcams, id: 'disable_webcams_checkbox' %>&nbsp; 
      <%= t('default.room.disablewebcams') %>&nbsp;
      <br>
    
      <%= form.check_box :disable_mics, id: 'disable_mics_checkbox' %>&nbsp; 
      <%= t('default.room.disablemics') %>&nbsp;
      <br>

      <%= form.check_box :disable_private_chat, id: 'disable_private_chat_checkbox' %>&nbsp; 
      <%= t('default.room.disableprvtchat') %>&nbsp; 
      <br>

      <%= form.check_box :disable_public_chat, id: 'disable_public_chat_checkbox' %>&nbsp; 
      <%= t('default.room.disablepublicchat') %>&nbsp;
      <br>

      <%= form.check_box :disable_shared_notes, id: 'disable_shared_notes_checkbox' %>&nbsp; 
      <%= t('default.room.disablesharednotes') %>&nbsp;
      <br>

      <%= form.check_box :hide_user_list, id: 'hide_user_list_checkbox' %>&nbsp; 
      <%= t('default.room.disableuserlist') %>&nbsp;
    </div>
  </details>

  <hr>

   <details>
    <summary class="text-black ">Room Settings</summary>
    
    <div class="field form-group input-group" style="padding-left: 5%">
      <%= form.check_box :wait_moderator, id: 'wait_moderator_checkbox' %>&nbsp; 
      <%= t('default.room.waitmoderator') %>&nbsp;
      <br>
    
      <%= form.check_box :session_may_be_recorded, id: 'session_may_be_recorde_checkbox' %>&nbsp; 
      <%= t('default.room.sessionmayberecorded') %>&nbsp;
      <br>

      <%= form.check_box :record_from_start, id: 'record_from_start_checkbox' %>&nbsp; 
      <%= t('default.room.recordfromstart') %>&nbsp; 
      <br>

      <%= form.check_box :hide_recording_btn, id: 'hide_recording_btn_checkbox' %>&nbsp; 
      <%= t('default.room.hiderecordingbtn') %>&nbsp;
    </div>
  </details>

  <hr>

  <div class="actions pt-6">
    <div class = "flex-row">
      <%= form.submit t('default.room.update'), class: "btn-primary m-1 ml-0" %>
      <%= form.button t('default.room.cancel'), class: "btn-secondary m-1", name: "cancel" %>
    </div>
  </div>
<% end %>
