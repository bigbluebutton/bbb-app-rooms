<tr class="d-flex recording-published-<%= recording[:published] %>">
  <td class="col-5 align-middle td-titles">
    <div class="item-title">
      <% if recording[:metadata][:name] %>
        <%= recording[:metadata][:name] %>
      <% else %>
        <%= recording[:name] %>
      <% end %>
    </div>
    <div class="item-description">
      <text id='recording-description-text' class="text-wrap">
        <%= recording[:metadata][:'bbb-recording-description'] ? recording[:metadata][:'bbb-recording-description'] : nil %>
      </text>
    </div>
  </td>
  <td class="col-2 align-middle">
    <%= format_date(recording[:startTime]) %>
  </td>
  <td class="col-3 align-middle">
    <%= distance_of_time_in_words(0, recording_duration_secs(recording)).capitalize %>
  </td>
  <td class="col-2 align-middle">
    <% if can_edit?(user, room) %>
      <div class="dropdown dropdown-opts">
        <a href="#" class="dropdown-toggle" id="dropdown-opts-<%= recording[:recordID] %>" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="icon material-icons">more_vert</i>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdown-opts-<%= recording[:recordID] %>">
          <% if recording[:published] %>
            <% recording[:playbacks].each do |p| %>
              <%= link_to t("recordings.playbacks.#{p[:type]}"), p[:url], class: "dropdown-item", target: "_blank" %>
            <% end %>
            <div class="dropdown-divider"></div>
          <% end %>
          <% if recording[:published] %>
            <%= link_to recording_unpublish_path(room, record_id: recording[:recordID]),
             method: :post,
             data: { confirm: t('recordings.confirm.unpublish') },
             class: "dropdown-item" do %>
              <%= t("recordings.unpublish") %>
            <% end %>
          <% else %>
            <%= link_to recording_publish_path(room, record_id: recording[:recordID]),
             method: :post,
             data: { confirm: t('recordings.confirm.publish') },
             class: "dropdown-item" do %>
              <%= t("recordings.publish") %>
            <% end %>
          <% end %>
          <%= link_to recording_delete_path(room, record_id: recording[:recordID]),
           method: :post,
           data: { confirm: t('recordings.confirm.destroy') },
           class: "dropdown-item" do %>
            <%= t("recordings.destroy") %>
          <% end %>
        </div>
      </div>
    <% end %>
  </td>
</tr>
